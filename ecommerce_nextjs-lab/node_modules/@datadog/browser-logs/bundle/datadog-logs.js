(()=>{"use strict";const e={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},t=console,n={};Object.keys(e).forEach((e=>{n[e]=t[e]}));const o="Datadog Browser SDK:",r={debug:n.debug.bind(t,o),log:n.log.bind(t,o),info:n.info.bind(t,o),warn:n.warn.bind(t,o),error:n.error.bind(t,o)},s="https://docs.datadoghq.com",i=`${s}/real_user_monitoring/browser/troubleshooting`,a="More details:";function c(e,t){return(...n)=>{try{return e(...n)}catch(e){r.error(t,e)}}}let u,l=!1;function d(e){l=e}function f(e){return function(){return p(e,this,arguments)}}function p(e,t,n){try{return e.apply(t,n)}catch(e){!function(e){if(g(e),u)try{u(e)}catch(e){g(e)}}(e)}}function g(...e){l&&r.error("[MONITOR]",...e)}function m(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get(){return this},configurable:!0});let e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}const y=1024,h=/[^\u0000-\u007F]/;function b(e){return h.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length}function v(e,t){const n=m();let o;return n.Zone&&"function"==typeof n.Zone.__symbol__&&(o=e[n.Zone.__symbol__(t)]),o||(o=e[t]),o}function w(e,t){return v(m(),"setTimeout")(f(e),t)}function S(e){v(m(),"clearTimeout")(e)}function k(e,t){return v(m(),"setInterval")(f(e),t)}function C(e){v(m(),"clearInterval")(e)}function x(e,t,n){const o=!n||void 0===n.leading||n.leading,r=!n||void 0===n.trailing||n.trailing;let s,i,a=!1;return{throttled:(...n)=>{a?s=n:(o?e(...n):s=n,a=!0,i=w((()=>{r&&s&&e(...s),a=!1,s=void 0}),t))},cancel:()=>{S(i),a=!1,s=void 0}}}function _(){}function E(e,t,n){if("object"!=typeof e||null===e)return JSON.stringify(e);const o=T(Object.prototype),r=T(Array.prototype),s=T(Object.getPrototypeOf(e)),i=T(e);try{return JSON.stringify(e,t,n)}catch(e){return"<error: unable to serialize object>"}finally{o(),r(),s(),i()}}function T(e){const t=e,n=t.toJSON;return n?(delete t.toJSON,()=>{t.toJSON=n}):_}function $(e,t){return Object.keys(e).some((n=>e[n]===t))}function R(e){return 0===Object.keys(e).length}function O(e=2){const t=new Map;let n=!1;function o(o=0){if(n||0===e)return;const s=2===e?3072:16384;let c=o;t.forEach((e=>{c+=e.getBytesCount()})),c>s&&(!function(e){r.warn(`Customer data exceeds the recommended ${e/y}KiB threshold. ${a} ${i}/#customer-data-exceeds-the-recommended-threshold-warning`)}(s),n=!0)}return{createDetachedTracker:()=>{const e=L((()=>o(e.getBytesCount())));return e},getOrCreateTracker:e=>(t.has(e)||t.set(e,L(o)),t.get(e)),setCompressionStatus:t=>{0===e&&(e=t,o())},getCompressionStatus:()=>e,stop:()=>{t.forEach((e=>e.stop())),t.clear()}}}function L(e){let t=0;const{throttled:n,cancel:o}=x((n=>{t=b(E(n)),e()}),200),r=()=>{o(),t=0};return{updateCustomerData:e=>{R(e)?r():n(e)},resetCustomerData:r,getBytesCount:()=>t,stop:()=>{o()}}}function A(e){return null===e?"null":Array.isArray(e)?"array":typeof e}function I(e,t,n=function(){if("undefined"!=typeof WeakSet){const e=new WeakSet;return{hasAlreadyBeenSeen(t){const n=e.has(t);return n||e.add(t),n}}}const e=[];return{hasAlreadyBeenSeen(t){const n=e.indexOf(t)>=0;return n||e.push(t),n}}}()){if(void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,e)}if(n.hasAlreadyBeenSeen(t))return;if(Array.isArray(t)){const o=Array.isArray(e)?e:[];for(let e=0;e<t.length;++e)o[e]=I(o[e],t[e],n);return o}const o="object"===A(e)?e:{};for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=I(o[e],t[e],n));return o}function P(e){return I(void 0,e)}function D(...e){let t;for(const n of e)null!=n&&(t=I(t,n));return t}function M(e,t=225280){const n=T(Object.prototype),o=T(Array.prototype),r=[],s=new WeakMap,i=B(e,"$",void 0,r,s),a=JSON.stringify(i);let c=a?a.length:0;if(!(c>t)){for(;r.length>0&&c<t;){const n=r.shift();let o=0;if(Array.isArray(n.source))for(let i=0;i<n.source.length;i++){const a=B(n.source[i],n.path,i,r,s);if(c+=void 0!==a?JSON.stringify(a).length:4,c+=o,o=1,c>t){q(t,"truncated",e);break}n.target[i]=a}else for(const i in n.source)if(Object.prototype.hasOwnProperty.call(n.source,i)){const a=B(n.source[i],n.path,i,r,s);if(void 0!==a&&(c+=JSON.stringify(a).length+o+i.length+3,o=1),c>t){q(t,"truncated",e);break}n.target[i]=a}}return n(),o(),i}q(t,"discarded",e)}function B(e,t,n,o,r){const s=function(e){const t=e;if(t&&"function"==typeof t.toJSON)try{return t.toJSON()}catch(e){}return e}(e);if(!s||"object"!=typeof s)return function(e){if("bigint"==typeof e)return`[BigInt] ${e.toString()}`;if("function"==typeof e)return`[Function] ${e.name||"unknown"}`;if("symbol"==typeof e)return`[Symbol] ${e.description||e.toString()}`;return e}(s);const i=U(s);if("[Object]"!==i&&"[Array]"!==i&&"[Error]"!==i)return i;const a=e;if(r.has(a))return`[Reference seen at ${r.get(a)}]`;const c=void 0!==n?`${t}.${n}`:t,u=Array.isArray(s)?[]:{};return r.set(a,c),o.push({source:s,target:u,path:c}),u}function U(e){try{if(e instanceof Event)return{type:(t=e).type,isTrusted:t.isTrusted,currentTarget:t.currentTarget?U(t.currentTarget):null,target:t.target?U(t.target):null};if(e instanceof RegExp)return`[RegExp] ${e.toString()}`;const n=Object.prototype.toString.call(e).match(/\[object (.*)\]/);if(n&&n[1])return`[${n[1]}]`}catch(e){}var t;return"[Unserializable]"}function q(e,t,n){r.warn(`The data provided has been ${t} as it is over the limit of ${e} characters:`,n)}class j{constructor(e){this.onFirstSubscribe=e,this.observers=[]}subscribe(e){return this.observers.push(e),1===this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),{unsubscribe:()=>{this.observers=this.observers.filter((t=>e!==t)),!this.observers.length&&this.onLastUnsubscribe&&this.onLastUnsubscribe()}}}notify(e){this.observers.forEach((t=>t(e)))}}function N(...e){return new j((t=>{const n=e.map((e=>e.subscribe((e=>t.notify(e)))));return()=>n.forEach((e=>e.unsubscribe()))}))}function F(e){let t={};const n=new j,o={getContext:()=>P(t),setContext:r=>{"object"===A(r)?(t=M(r),null==e||e.updateCustomerData(t)):o.clearContext(),n.notify()},setContextProperty:(o,r)=>{t[o]=M(r),null==e||e.updateCustomerData(t),n.notify()},removeContextProperty:o=>{delete t[o],null==e||e.updateCustomerData(t),n.notify()},clearContext:()=>{t={},null==e||e.resetCustomerData(),n.notify()},changeObservable:n};return o}const G={GRANTED:"granted",NOT_GRANTED:"not-granted"};function H(e,t,n,o,r){return z(e,t,[n],o,r)}function z(e,t,n,o,{once:r,capture:s,passive:i}={}){const a=f((t=>{(t.isTrusted||t.__ddIsTrusted||e.allowUntrustedEvents)&&(r&&d(),o(t))})),c=i?{capture:s,passive:i}:s,u=window.EventTarget&&t instanceof EventTarget?window.EventTarget.prototype:t,l=v(u,"addEventListener");function d(){const e=v(u,"removeEventListener");n.forEach((n=>e.call(t,n,a,c)))}return n.forEach((e=>l.call(t,e,a,c))),{stop:d}}const J="_dd_c",W=[];function V(e,t,n,o){const r=function(e,t){return`${J}_${e}_${t}`}(n,o);function s(){const e=localStorage.getItem(r);return null!==e?JSON.parse(e):{}}W.push(H(e,window,"storage",(({key:e})=>{r===e&&t.setContext(s())}))),t.changeObservable.subscribe((function(){localStorage.setItem(r,JSON.stringify(t.getContext()))})),t.setContext(D(s(),t.getContext()))}const X="?";function Z(e){const t=[];let n=se(e,"stack");const o=String(e);return n&&n.startsWith(o)&&(n=n.slice(o.length)),n&&n.split("\n").forEach((e=>{const n=function(e){const t=Q.exec(e);if(!t)return;const n=t[2]&&0===t[2].indexOf("native"),o=t[2]&&0===t[2].indexOf("eval"),r=ee.exec(t[2]);o&&r&&(t[2]=r[1],t[3]=r[2],t[4]=r[3]);return{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||X,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){const t=te.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:X,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){const t=ne.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||X,line:+t[3],url:t[2]}}(e)||function(e){const t=oe.exec(e);if(!t)return;const n=t[3]&&t[3].indexOf(" > eval")>-1,o=re.exec(t[3]);n&&o&&(t[3]=o[1],t[4]=o[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||X,line:t[4]?+t[4]:void 0,url:t[3]}}(e);n&&(!n.func&&n.line&&(n.func=X),t.push(n))})),{message:se(e,"message"),name:se(e,"name"),stack:t}}const K="((?:file|https?|blob|chrome-extension|electron|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",Y="(?::(\\d+))",Q=new RegExp(`^\\s*at (.*?) ?\\(${K}${Y}?${Y}?\\)?\\s*$`,"i"),ee=new RegExp(`\\((\\S*)${Y}${Y}\\)`);const te=new RegExp(`^\\s*at ?${K}${Y}?${Y}??\\s*$`,"i");const ne=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;const oe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,re=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function se(e,t){if("object"!=typeof e||!e||!(t in e))return;const n=e[t];return"string"==typeof n?n:void 0}function ie(e,t,n,o){const r=[{url:t,column:o,line:n}],{name:s,message:i}=function(e){let t,n;"[object String]"==={}.toString.call(e)&&([,t,n]=ae.exec(e));return{name:t,message:n}}(e);return{name:s,message:i,stack:r}}const ae=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?([\s\S]*)$/;function ce(){const e=new Error;let t;return p((()=>{const n=Z(e);n.stack=n.stack.slice(2),t=ue(n)})),t}function ue(e){let t=le(e);return e.stack.forEach((e=>{const n="?"===e.func?"<anonymous>":e.func,o=e.args&&e.args.length>0?`(${e.args.join(", ")})`:"",r=e.line?`:${e.line}`:"",s=e.line&&e.column?`:${e.column}`:"";t+=`\n  at ${n}${o} @ ${e.url}${r}${s}`})),t}function le(e){return`${e.name||"Error"}: ${e.message}`}const de="No stack, consider using an instance of Error";function fe({stackTrace:e,originalError:t,handlingStack:n,componentStack:o,startClocks:r,nonErrorPrefix:s,source:i,handling:a}){const c=ge(t),u=function(e,t,n,o){return(null==e?void 0:e.message)&&(null==e?void 0:e.name)?e.message:t?"Empty message":`${n} ${E(M(o))}`}(e,c,s,t),l=function(e,t){if(void 0===t)return!1;if(e)return!0;return t.stack.length>0&&(t.stack.length>1||void 0!==t.stack[0].url)}(c,e)?ue(e):de,d=c?me(t,i):void 0;return{startClocks:r,source:i,handling:a,handlingStack:n,componentStack:o,originalError:t,type:e?e.name:void 0,message:u,stack:l,causes:d,fingerprint:pe(t)}}function pe(e){return ge(e)&&"dd_fingerprint"in e?String(e.dd_fingerprint):void 0}function ge(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function me(e,t){let n=e;const o=[];for(;ge(null==n?void 0:n.cause)&&o.length<10;){const e=Z(n.cause);o.push({message:n.cause.message,source:t,type:null==e?void 0:e.name,stack:e&&ue(e)}),n=n.cause}return o.length?o:void 0}var ye;!function(e){e.WRITABLE_RESOURCE_GRAPHQL="writable_resource_graphql",e.REMOTE_CONFIGURATION="remote_configuration",e.ACTION_NAME_MASKING="action_name_masking",e.CONSISTENT_TRACE_SAMPLING="consistent_trace_sampling",e.MISSING_URL_CONTEXT_TELEMETRY="missing_url_context_telemetry"}(ye||(ye={}));const he=new Set;function be(e){Array.isArray(e)&&e.filter((e=>$(ye,e))).forEach((e=>{he.add(e)}))}function ve(){return he}const we="dd0g-gov.com",Se="datadoghq.com",ke="pci.browser-intake-datadoghq.com",Ce=["ddsource","ddtags"],xe=1e3,_e=6e4,Ee=31536e6;function Te(){return(new Date).getTime()}function $e(){return Te()}function Re(){return performance.now()}function Oe(){return{relative:Re(),timeStamp:$e()}}function Le(e,t){return e+t}function Ae(e){return e-Pe()}let Ie;function Pe(){return void 0===Ie&&(Ie=performance.timing.navigationStart),Ie}function De(e,t){const n=window.__ddBrowserSdkExtensionCallback;n&&n({type:e,payload:t})}function Me(e){return 0!==e&&100*Math.random()<=e}function Be(){var e;const t=window.navigator;return{status:t.onLine?"connected":"not_connected",interfaces:t.connection&&t.connection.type?[t.connection.type]:void 0,effective_type:null===(e=t.connection)||void 0===e?void 0:e.effectiveType}}function Ue(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function qe(){const e=[];return{add:t=>{e.push(t)>500&&e.splice(0,1)},remove:t=>{Ue(e,t)},drain:t=>{e.forEach((e=>e(t))),e.length=0}}}const je="log",Ne="configuration",Fe="usage",Ge=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","https://d3uc069fcn7uxw.cloudfront.net","https://d20xtzwzcl0ceb.cloudfront.net","http://localhost","<anonymous>"],He=["ddog-gov.com"];let ze=qe(),Je=e=>{ze.add((()=>Je(e)))};function We(e,t){let n;const o=new j,r=new Set,s=!He.includes(t.site)&&Me(t.telemetrySampleRate),i={[je]:s,[Ne]:s&&Me(t.telemetryConfigurationSampleRate),[Fe]:s&&Me(t.telemetryUsageSampleRate)},a={is_local_file:"file:"===window.location.protocol,is_worker:"WorkerGlobalScope"in self};return Je=s=>{const c=E(s);if(i[s.type]&&r.size<t.maxTelemetryEventsPerPage&&!r.has(c)){const t=function(e,t,o){return D({type:"telemetry",date:$e(),service:e,version:"6.2.1",source:"browser",_dd:{format_version:2},telemetry:D(t,{runtime_env:o,connectivity:Be(),sdk_setup:"cdn"}),experimental_features:Array.from(ve())},void 0!==n?n():{})}(e,s,a);o.notify(t),De("telemetry",t),r.add(c)}},u=Xe,{setContextProvider:e=>{n=e},observable:o,enabled:s}}function Ve(t,n){g(e.debug,t,n),Je({type:je,message:t,status:"debug",...n})}function Xe(e,t){Je({type:je,status:"error",...Ze(e),...t})}function Ze(e){if(ge(e)){const t=Z(e);return{error:{kind:t.name,stack:ue(Ke(t))},message:t.message}}return{error:{stack:de},message:`Uncaught ${E(e)}`}}function Ke(e){return e.stack=e.stack.filter((e=>!e.url||Ge.some((t=>e.url.startsWith(t))))),e}function Ye(e){const t={...e};return["id","name","email"].forEach((e=>{e in t&&(t[e]=String(t[e]))})),t}function Qe(e,t){t.silentMultipleInit||r.error(`${e} is already initialized.`)}const et="agent",tt="console",nt="logger",ot="network",rt="source",st="report";function it(e,t,n){const o=n.getHandler(),r=Array.isArray(o)?o:[o];return ct[e]>=ct[n.getLevel()]&&r.includes(t)}const at={ok:"ok",debug:"debug",info:"info",notice:"notice",warn:"warn",error:"error",critical:"critical",alert:"alert",emerg:"emerg"},ct={[at.ok]:0,[at.debug]:1,[at.info]:2,[at.notice]:4,[at.warn]:5,[at.error]:6,[at.critical]:7,[at.alert]:8,[at.emerg]:9};function ut(e,{includeMessage:t=!1}={}){return{stack:e.stack,kind:e.type,message:t?e.message:void 0,causes:e.causes,fingerprint:e.fingerprint,handling:e.handling}}var lt=function(e,t,n,o){var r,s=arguments.length,i=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(i=(s<3?r(i):s>3?r(t,n,i):r(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};const dt="console",ft="http",pt=Object.keys(at);class gt{constructor(e,t,n,o=ft,r=at.debug,s={}){this.handleLogStrategy=e,this.handlerType=o,this.level=r,this.contextManager=F(t),this.contextManager.setContext(s),n&&this.contextManager.setContextProperty("logger",{name:n})}logImplementation(e,t,n=at.info,o,r){const s=M(t);let i;if(null!=o){i=D({error:ut(fe({stackTrace:ge(o)?Z(o):void 0,originalError:o,nonErrorPrefix:"Provided",source:nt,handling:"handled",startClocks:Oe()}),{includeMessage:!0})},s)}else i=s;this.handleLogStrategy({message:M(e),context:i,status:n},this,r)}log(e,t,n=at.info,o){let r;it(n,ft,this)&&(r=ce()),this.logImplementation(e,t,n,o,r)}setContext(e){this.contextManager.setContext(e)}getContext(){return this.contextManager.getContext()}setContextProperty(e,t){this.contextManager.setContextProperty(e,t)}removeContextProperty(e){this.contextManager.removeContextProperty(e)}clearContext(){this.contextManager.clearContext()}setHandler(e){this.handlerType=e}getHandler(){return this.handlerType}setLevel(e){this.level=e}getLevel(){return this.level}}function mt(e){return function(t,n,o){let r;it(e,ft,this)&&(r=ce()),this.logImplementation(t,n,e,o,r)}}function yt(){const e=m().DatadogEventBridge;if(e)return{getCapabilities(){var t;return JSON.parse((null===(t=e.getCapabilities)||void 0===t?void 0:t.call(e))||"[]")},getPrivacyLevel(){var t;return null===(t=e.getPrivacyLevel)||void 0===t?void 0:t.call(e)},getAllowedWebViewHosts:()=>JSON.parse(e.getAllowedWebViewHosts()),send(t,n,o){const r=o?{id:o}:void 0;e.send(JSON.stringify({eventType:t,event:n,view:r}))}}}function ht(e){var t;void 0===e&&(e=null===(t=m().location)||void 0===t?void 0:t.hostname);const n=yt();return!!n&&n.getAllowedWebViewHosts().some((t=>e===t||e.endsWith(`.${t}`)))}function bt(e,t,n,{computeHandlingStack:o}={}){let r=e[t];if("function"!=typeof r){if(!(t in e)||!t.startsWith("on"))return{stop:_};r=_}let s=!1;const i=function(){if(s)return r.apply(this,arguments);const e=Array.from(arguments);let t;p(n,null,[{target:this,parameters:e,onPostCall:e=>{t=e},handlingStack:o?ce():void 0}]);const i=r.apply(this,e);return t&&p(t,null,[i]),i};return e[t]=i,{stop:()=>{s=!0,e[t]===i&&(e[t]=r)}}}function vt(e){return wt(e,location.href).href}function wt(e,t){const n=function(){if(void 0===kt)try{const e=new St("http://test/path");kt="http://test/path"===e.href}catch(e){kt=!1}return kt?St:void 0}();if(n)try{return void 0!==t?new n(e,t):new n(e)}catch(n){throw new Error(`Failed to construct URL: ${String(n)} ${E({url:e,base:t})}`)}if(void 0===t&&!/:/.test(e))throw new Error(`Invalid URL: '${e}'`);let o=document;const r=o.createElement("a");if(void 0!==t){o=document.implementation.createHTMLDocument("");const e=o.createElement("base");e.href=t,o.head.appendChild(e),o.body.appendChild(r)}return r.href=e,r}lt([function(e,t,n){const o=n.value;n.value=function(...e){return(u?f(o):o).apply(this,e)}}],gt.prototype,"logImplementation",null),gt.prototype.ok=mt(at.ok),gt.prototype.debug=mt(at.debug),gt.prototype.info=mt(at.info),gt.prototype.notice=mt(at.notice),gt.prototype.warn=mt(at.warn),gt.prototype.error=mt(at.error),gt.prototype.critical=mt(at.critical),gt.prototype.alert=mt(at.alert),gt.prototype.emerg=mt(at.emerg);const St=URL;let kt,Ct;function xt(){return Ct||(Ct=new j((e=>{if(!window.fetch)return;const{stop:t}=bt(window,"fetch",(t=>function({parameters:e,onPostCall:t,handlingStack:n},o){const[r,s]=e;let i=s&&s.method;void 0===i&&r instanceof Request&&(i=r.method);const a=void 0!==i?String(i).toUpperCase():"GET",c=r instanceof Request?r.url:vt(String(r)),u=Oe(),l={state:"start",init:s,input:r,method:a,startClocks:u,url:c,handlingStack:n};o.notify(l),e[0]=l.input,e[1]=l.init,t((e=>function(e,t,n){const o=n;function r(t){o.state="resolve",Object.assign(o,t),e.notify(o)}t.then(f((e=>{r({response:e,responseType:e.type,status:e.status,isAborted:!1})})),f((e=>{var t,n;r({status:0,isAborted:(null===(n=null===(t=o.init)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)||e instanceof DOMException&&e.code===DOMException.ABORT_ERR,error:e})})))}(o,e,l)))}(t,e)),{computeHandlingStack:!0});return t}))),Ct}function _t(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,_t)}const Et=/([\w-]+)\s*=\s*([^;]+)/g;function Tt(e,t,n=""){const o=e.charCodeAt(t-1),r=o>=55296&&o<=56319?t+1:t;return e.length<=r?e:`${e.slice(0,r)}${n}`}let $t,Rt,Ot;function Lt(){return null!=$t?$t:$t=function(e=window){var t;const n=e.navigator.userAgent;if(e.chrome||/HeadlessChrome/.test(n))return 0;if(0===(null===(t=e.navigator.vendor)||void 0===t?void 0:t.indexOf("Apple"))||/safari/i.test(n)&&!/chrome|android/i.test(n))return 1;return 2}()}function At(e,t,n=0,o){const r=new Date;r.setTime(r.getTime()+n);const s=`expires=${r.toUTCString()}`,i=o&&o.crossSite?"none":"strict",a=o&&o.domain?`;domain=${o.domain}`:"",c=o&&o.secure?";secure":"",u=o&&o.partitioned?";partitioned":"";document.cookie=`${e}=${t};${s};path=/;samesite=${i}${a}${c}${u}`}function It(e){return function(e,t){for(Et.lastIndex=0;;){const n=Et.exec(e);if(!n)break;if(n[1]===t)return n[2]}}(document.cookie,e)}function Pt(e){return Rt||(Rt=function(e){const t=new Map;for(Et.lastIndex=0;;){const n=Et.exec(e);if(!n)break;t.set(n[1],n[2])}return t}(document.cookie)),Rt.get(e)}function Dt(e,t){At(e,"",0,t)}const Mt="_dd_s";function Bt(e){return Object.values(e)}const Ut=144e5,qt=9e5,jt=Ee,Nt="cookie",Ft="local-storage",Gt=/^([a-zA-Z]+)=([a-z0-9-]+)$/;function Ht(e,t){const n={isExpired:"1"};return t.trackAnonymousUser&&((null==e?void 0:e.anonymousId)?n.anonymousId=null==e?void 0:e.anonymousId:n.anonymousId=Math.floor(Math.random()*Math.pow(36,10)).toString(36).padStart(10,"0")),n}function zt(e){return R(e)}function Jt(e){return!zt(e)}function Wt(e){return void 0!==e.isExpired||!((void 0===(t=e).created||Te()-Number(t.created)<Ut)&&(void 0===t.expire||Te()<Number(t.expire)));var t}function Vt(e){e.expire=String(Te()+qt)}function Xt(e){return(t=e,Object.entries(t)).map((([e,t])=>"anonymousId"===e?`aid=${t}`:`${e}=${t}`)).join("&");var t}function Zt(e){const t={};return function(e){return!!e&&(-1!==e.indexOf("&")||Gt.test(e))}(e)&&e.split("&").forEach((e=>{const n=Gt.exec(e);if(null!==n){const[,e,o]=n;"aid"===e?t.anonymousId=o:t[e]=o}})),t}function Kt(e){const t=function(e){const t={};t.secure=!!e.useSecureSessionCookie||!!e.usePartitionedCrossSiteSessionCookie,t.crossSite=!!e.usePartitionedCrossSiteSessionCookie,t.partitioned=!!e.usePartitionedCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===Ot){const e=`dd_site_test_${_t()}`,t="test",n=window.location.hostname.split(".");let o=n.pop();for(;n.length&&!It(e);)o=`${n.pop()}.${o}`,At(e,t,xe,{domain:o});Dt(e,{domain:o}),Ot=o}return Ot}());return t}(e);return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{const t=`dd_cookie_test_${_t()}`,n="test";At(t,n,_e,e);const o=It(t)===n;return Dt(t,e),o}catch(e){return r.error(e),!1}}(t)?{type:Nt,cookieOptions:t}:void 0}function Yt(e,t){const n={isLockEnabled:0===Lt(),persistSession:(o=t,e=>{At(Mt,Xt(e),qt,o)}),retrieveSession:Qt,expireSession:n=>function(e,t,n){const o=Ht(t,n);At(Mt,Xt(o),n.trackAnonymousUser?jt:Ut,e)}(t,n,e)};var o;return function(e){if(!Pt(Mt)){const t=Pt("_dd"),n=Pt("_dd_r"),o=Pt("_dd_l"),r={};t&&(r.id=t),o&&/^[01]$/.test(o)&&(r.logs=o),n&&/^[012]$/.test(n)&&(r.rum=n),Jt(r)&&(Vt(r),e.persistSession(r))}}(n),n}function Qt(){return Zt(It(Mt))}function en(){try{const e=_t(),t=`_dd_test_${e}`;localStorage.setItem(t,e);const n=localStorage.getItem(t);return localStorage.removeItem(t),e===n?{type:Ft}:void 0}catch(e){return}}function tn(e){return{isLockEnabled:!1,persistSession:nn,retrieveSession:on,expireSession:t=>function(e,t){nn(Ht(e,t))}(t,e)}}function nn(e){localStorage.setItem(Mt,Xt(e))}function on(){return Zt(localStorage.getItem(Mt))}const rn=[];let sn;function an(e,t,n=0){var o;const{isLockEnabled:r,persistSession:s,expireSession:i}=t,a=e=>s({...e,lock:u}),c=()=>{const e=t.retrieveSession(),n=e.lock;return e.lock&&delete e.lock,{session:e,lock:n}};if(sn||(sn=e),e!==sn)return void rn.push(e);if(r&&n>=100)return void un(t);let u,l=c();if(r){if(l.lock)return void cn(e,t,n);if(u=_t(),a(l.session),l=c(),l.lock!==u)return void cn(e,t,n)}let d=e.process(l.session);if(r&&(l=c(),l.lock!==u))cn(e,t,n);else{if(d&&(Wt(d)?i(d):(Vt(d),r?a(d):s(d))),r&&(!d||!Wt(d))){if(l=c(),l.lock!==u)return void cn(e,t,n);s(l.session),d=l.session}null===(o=e.after)||void 0===o||o.call(e,d||l.session),un(t)}}function cn(e,t,n){w((()=>{an(e,t,n+1)}),10)}function un(e){sn=void 0;const t=rn.shift();t&&an(t,e)}const ln=xe;function dn(e){switch(e.sessionPersistence){case Nt:return Kt(e);case Ft:return en();case void 0:{let t=Kt(e);return!t&&e.allowFallbackToLocalStorage&&(t=en()),t}default:r.error(`Invalid session persistence '${String(e.sessionPersistence)}'`)}}function fn(e,t,n,o){const r=new j,s=new j,i=new j,a=e.type===Nt?Yt(t,e.cookieOptions):tn(t),{expireSession:c}=a,u=k((function(){an({process:e=>Wt(e)?Ht(e,t):void 0,after:p},a)}),ln);let l;g();const{throttled:d,cancel:f}=x((()=>{an({process:e=>{if(zt(e))return;const t=p(e);return function(e){if(zt(e))return!1;const{trackingType:t,isTracked:r}=o(e[n]);e[n]=t,delete e.isExpired,r&&!e.id&&(e.id=_t(),e.created=String(Te()))}(t),t},after:e=>{Jt(e)&&!m()&&function(e){l=e,r.notify()}(e),l=e}},a)}),ln);function p(e){return Wt(e)&&(e=Ht(e,t)),m()&&(!function(e){return l.id!==e.id||l[n]!==e[n]}(e)?(i.notify({previousState:l,newState:e}),l=e):(l=Ht(l,t),s.notify())),e}function g(){an({process:e=>{if(zt(e))return Ht(e,t)},after:e=>{l=e}},a)}function m(){return void 0!==l[n]}return{expandOrRenewSession:d,expandSession:function(){an({process:e=>m()?p(e):void 0},a)},getSession:()=>l,renewObservable:r,expireObservable:s,sessionStateUpdateObservable:i,restartSession:g,expire:()=>{f(),c(l),p(Ht(l,t))},stop:()=>{C(u)},updateSessionState:function(e){an({process:t=>({...t,...e}),after:p},a)}}}function pn(e,t,n){const o=function(e,t){const n=`/api/v2/${t}`,o=e.proxy;if("string"==typeof o){const e=vt(o);return t=>`${e}?ddforward=${encodeURIComponent(`${n}?${t}`)}`}if("function"==typeof o)return e=>o({path:n,parameters:e});const r=function(e,t){const{site:n=Se,internalAnalyticsSubdomain:o}=t;if("logs"===e&&t.usePciIntake&&n===Se)return ke;if(o&&n===Se)return`${o}.${Se}`;if(n===we)return`http-intake.logs.${n}`;const r=n.split("."),s=r.pop();return`browser-intake-${r.join("-")}.${s}`}(t,e);return e=>`https://${r}${n}?${e}`}(e,t);return{build(r,s){const i=function({clientToken:e,internalAnalyticsSubdomain:t},n,o,r,{retry:s,encoding:i}){const a=["sdk_version:6.2.1",`api:${r}`].concat(o);s&&a.push(`retry_count:${s.count}`,`retry_after:${s.lastFailureStatus}`);const c=["ddsource=browser",`ddtags=${encodeURIComponent(a.join(","))}`,`dd-api-key=${e}`,`dd-evp-origin-version=${encodeURIComponent("6.2.1")}`,"dd-evp-origin=browser",`dd-request-id=${_t()}`];i&&c.push(`dd-evp-encoding=${i}`);"rum"===n&&c.push(`batch_time=${$e()}`);t&&c.reverse();return c.join("&")}(e,t,n,r,s);return o(i)},urlPrefix:o(""),trackType:t}}function gn(e,t){const n=200-e.length-1;(t.length>n||function(e){if(!function(){try{return new RegExp("[\\p{Ll}]","u"),!0}catch(e){return!1}}())return!1;return new RegExp("[^\\p{Ll}\\p{Lo}0-9_:./-]","u").test(e)}(t))&&r.warn(`${e} value doesn't meet tag requirements and will be sanitized. ${a} ${s}/getting_started/tagging/#defining-tags`);return`${e}:${t.replace(/,/g,"_")}`}function mn(e){const t=e.site||Se,n=function(e){const{env:t,service:n,version:o,datacenter:r}=e,s=[];return t&&s.push(gn("env",t)),n&&s.push(gn("service",n)),o&&s.push(gn("version",o)),r&&s.push(gn("datacenter",r)),s}(e),o=function(e,t){return{logsEndpointBuilder:pn(e,"logs",t),rumEndpointBuilder:pn(e,"rum",t),sessionReplayEndpointBuilder:pn(e,"replay",t)}}(e,n),r=function(e,t){if(!e.replica)return;const n={...e,site:Se,clientToken:e.replica.clientToken},o={logsEndpointBuilder:pn(n,"logs",t),rumEndpointBuilder:pn(n,"rum",t)};return{applicationId:e.replica.applicationId,...o}}(e,n);return{replica:r,site:t,...o}}function yn(e,t){return null==e||"string"==typeof e||(r.error(`${t} must be defined as a string`),!1)}function hn(e,t){return!!(void 0===e||(n=e,function(e){return"number"==typeof e}(n)&&n>=0&&n<=100))||(r.error(`${t} Sample Rate should be a number between 0 and 100`),!1);var n}function bn(e){var t,n,o,i,u,l;if(e&&e.clientToken){if((!(d=e.site)||"string"!=typeof d||/(datadog|ddog|datad0g|dd0g)/.test(d)||(r.error(`Site should be a valid Datadog site. ${a} ${s}/getting_started/site/.`),0))&&hn(e.sessionSampleRate,"Session")&&hn(e.telemetrySampleRate,"Telemetry")&&hn(e.telemetryConfigurationSampleRate,"Telemetry Configuration")&&hn(e.telemetryUsageSampleRate,"Telemetry Usage")&&yn(e.version,"Version")&&yn(e.env,"Env")&&yn(e.service,"Service")){var d;if(void 0===e.trackingConsent||$(G,e.trackingConsent))return{beforeSend:e.beforeSend&&c(e.beforeSend,"beforeSend threw an error:"),sessionStoreStrategyType:dn(e),sessionSampleRate:null!==(t=e.sessionSampleRate)&&void 0!==t?t:100,telemetrySampleRate:null!==(n=e.telemetrySampleRate)&&void 0!==n?n:20,telemetryConfigurationSampleRate:null!==(o=e.telemetryConfigurationSampleRate)&&void 0!==o?o:5,telemetryUsageSampleRate:null!==(i=e.telemetryUsageSampleRate)&&void 0!==i?i:5,service:e.service||void 0,silentMultipleInit:!!e.silentMultipleInit,allowUntrustedEvents:!!e.allowUntrustedEvents,trackingConsent:null!==(u=e.trackingConsent)&&void 0!==u?u:G.GRANTED,trackAnonymousUser:null===(l=e.trackAnonymousUser)||void 0===l||l,storeContextsAcrossPages:!!e.storeContextsAcrossPages,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144,...mn(e)};r.error('Tracking Consent should be either "granted" or "not-granted"')}}else r.error("Client Token is not configured, we will not send any data.")}const vn={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function wn(e,t){const n=[];t.includes(vn.cspViolation)&&n.push(function(e){return new j((t=>{const{stop:n}=H(e,document,"securitypolicyviolation",(e=>{t.notify(function(e){const t=`'${e.blockedURI}' blocked by '${e.effectiveDirective}' directive`;return Sn({type:e.effectiveDirective,message:`${vn.cspViolation}: ${t}`,originalError:e,csp:{disposition:e.disposition},stack:kn(e.effectiveDirective,e.originalPolicy?`${t} of the policy "${Tt(e.originalPolicy,100,"...")}"`:"no policy",e.sourceFile,e.lineNumber,e.columnNumber)})}(e))}));return n}))}(e));const o=t.filter((e=>e!==vn.cspViolation));return o.length&&n.push(function(e){return new j((t=>{if(!window.ReportingObserver)return;const n=f(((e,n)=>e.forEach((e=>t.notify(function(e){const{type:t,body:n}=e;return Sn({type:n.id,message:`${t}: ${n.message}`,originalError:e,stack:kn(n.id,n.message,n.sourceFile,n.lineNumber,n.columnNumber)})}(e)))))),o=new window.ReportingObserver(n,{types:e,buffered:!0});return o.observe(),()=>{o.disconnect()}}))}(o)),N(...n)}function Sn(e){return{startClocks:Oe(),source:st,handling:"unhandled",...e}}function kn(e,t,n,o,r){return n?ue({name:e,message:t,stack:[{func:"?",url:n,line:null!=o?o:void 0,column:null!=r?r:void 0}]}):void 0}function Cn(e,t,n){return void 0===e?[]:"all"===e||Array.isArray(e)&&e.every((e=>t.includes(e)))?"all"===e?t:function(e){const t=new Set;return e.forEach((e=>t.add(e))),Array.from(t)}(e):void r.error(`${n} should be "all" or an array with allowed values "${t.join('", "')}"`)}function xn(t,n,o){const s=qe();let i,a;const c=n.observable.subscribe(u);function u(){if(!a||!i||!n.isGranted())return;c.unsubscribe();const e=o(i,a);s.drain(e)}return{init(t){if(!t)return void r.error("Missing configuration");if(be(t.enableExperimentalFeatures),ht()&&(t=function(e){return{...e,clientToken:"empty"}}(t)),i=t,a)return void Qe("DD_LOGS",t);const o=function(t){!0===t.usePciIntake&&t.site&&"datadoghq.com"!==t.site&&r.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");const n=bn(t),o=Cn(t.forwardConsoleLogs,Bt(e),"Forward Console Logs"),s=Cn(t.forwardReports,Bt(vn),"Forward Reports");if(n&&o&&s)return t.forwardErrorsToLogs&&!o.includes(e.error)&&o.push(e.error),{forwardErrorsToLogs:!1!==t.forwardErrorsToLogs,forwardConsoleLogs:o,forwardReports:s,requestErrorResponseLengthLimit:32768,...n}}(t);o&&(a=o,xt().subscribe(_),n.tryToInit(o.trackingConsent),u())},get initConfiguration(){return i},getInternalContext:_,handleLog(e,n,o,r=t(),i=$e()){s.add((t=>t.handleLog(e,n,o,r,i)))}}}const _n="logs";const En={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function Tn(){return Boolean(window._DATADOG_SYNTHETICS_INJECTS_RUM||Pt("datadog-synthetics-injects-rum"))}function $n(){const e=window._DATADOG_SYNTHETICS_PUBLIC_ID||Pt("datadog-synthetics-public-id");return"string"==typeof e?e:void 0}function Rn(){const e=window._DATADOG_SYNTHETICS_RESULT_ID||Pt("datadog-synthetics-result-id");return"string"==typeof e?e:void 0}const On=1/0;function Ln({expireDelay:e,maxEntries:t}){let n=[];const o=[],r=k((()=>function(){const t=Re()-e;for(;n.length>0&&n[n.length-1].endTime<t;){const e=n.pop();e&&o.push(e.startTime)}}()),6e4);return{add:function(e,o){const r={value:e,startTime:o,endTime:On,remove:()=>{Ue(n,r)},close:e=>{r.endTime=e}};return t&&n.length>=t&&n.pop(),n.unshift(r),r},find:function(e=Infinity,t={returnInactive:!1}){for(const o of n)if(o.startTime<=e){if(t.returnInactive||e<=o.endTime)return o.value;break}},closeActive:function(e){const t=n[0];t&&t.endTime===On&&t.close(e)},findAll:function(e=Infinity,t=0){const o=Le(e,t);return n.filter((t=>t.startTime<=o&&e<=t.endTime)).map((e=>e.value))},reset:function(){n=[]},stop:function(){C(r)},getAllEntries:function(){return n.map((({startTime:e,endTime:t,value:n})=>({startTime:e,endTime:t===On?"Infinity":t,value:n})))},getDeletedEntries:function(){return o}}}const An=_e,In=Ut;let Pn=[];function Dn(e,t,n,o){const r=new j,s=new j,i=fn(e.sessionStoreStrategyType,e,t,n);Pn.push((()=>i.stop()));const a=Ln({expireDelay:In});function c(){return{id:i.getSession().id,trackingType:i.getSession()[t],isReplayForced:!!i.getSession().forcedReplay,anonymousId:i.getSession().anonymousId}}return Pn.push((()=>a.stop())),i.renewObservable.subscribe((()=>{a.add(c(),Re()),r.notify()})),i.expireObservable.subscribe((()=>{s.notify(),a.closeActive(Re())})),i.expandOrRenewSession(),a.add(c(),[0,Pe()][0]),o.observable.subscribe((()=>{o.isGranted()?i.expandOrRenewSession():i.expire()})),function(e,t){const{stop:n}=z(e,window,["click","touchstart","keydown","scroll"],t,{capture:!0,passive:!0});Pn.push(n)}(e,(()=>{o.isGranted()&&i.expandOrRenewSession()})),function(e,t){const n=()=>{"visible"===document.visibilityState&&t()},{stop:o}=H(e,document,"visibilitychange",n);Pn.push(o);const r=k(n,An);Pn.push((()=>{C(r)}))}(e,(()=>i.expandSession())),function(e,t){const{stop:n}=H(e,window,"resume",t,{capture:!0});Pn.push(n)}(e,(()=>i.restartSession())),{findSession:(e,t)=>a.find(e,t),renewObservable:r,expireObservable:s,sessionStateUpdateObservable:i.sessionStateUpdateObservable,expire:i.expire,updateSessionState:i.updateSessionState}}function Mn(e,t){const n=Dn(e,"logs",(t=>function(e,t){const n=function(e){return"0"===e||"1"===e}(t)?t:Bn(e);return{trackingType:n,isTracked:"1"===n}}(e,t)),t);return{findTrackedSession:(e,t={returnInactive:!1})=>{const o=n.findSession(e,t);return o&&"1"===o.trackingType?{id:o.id,anonymousId:o.anonymousId}:void 0},expireObservable:n.expireObservable}}function Bn(e){return Me(e.sessionSampleRate)?"1":"0"}let Un=!1;function qn(e){const t=window;if(Tn()){const e=n(t.DD_RUM_SYNTHETICS);return e||Un||(Un=!0,Ve("Logs sent before RUM is injected by the synthetics worker",{testId:$n(),resultId:Rn()})),e}return n(t.DD_RUM);function n(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}function jn(e,t,n,o,r){const s=pt.concat(["custom"]),i={};s.forEach((e=>{i[e]=function(e,t,n){let o=0,r=!1;return{isLimitReached(){if(0===o&&w((()=>{o=0}),_e),o+=1,o<=t||r)return r=!1,!1;if(o===t+1){r=!0;try{n({message:`Reached max number of ${e}s by minute: ${t}`,source:et,startClocks:Oe()})}finally{r=!1}}return!0}}}(e,t.eventRateLimiterThreshold,r)})),n.subscribe(0,(({rawLogsEvent:r,messageContext:s,savedCommonContext:a,domainContext:c})=>{var u,l;const d=Ae(r.date),f=e.findTrackedSession(d);if(!e.findTrackedSession(d,{returnInactive:!0}))return;const p=a||o();f&&f.anonymousId&&!p.user.anonymous_id&&(p.user.anonymous_id=f.anonymousId);const g=D({service:t.service,session_id:f?f.id:void 0,session:f?{id:f.id}:void 0,usr:R(p.user)?void 0:p.user,view:p.view},p.context,qn(d),r,s);!1===(null===(u=t.beforeSend)||void 0===u?void 0:u.call(t,g,c))||g.origin!==et&&(null!==(l=i[g.status])&&void 0!==l?l:i.custom).isLimitReached()||n.notify(1,g)}))}let Nn={};function Fn(n){return N(...n.map((n=>(Nn[n]||(Nn[n]=function(n){return new j((o=>{const r=t[n];return t[n]=(...t)=>{r.apply(console,t);const s=ce();p((()=>{o.notify(function(t,n,o){const r=t.map((e=>function(e){if("string"==typeof e)return M(e);if(ge(e))return le(Z(e));return E(M(e),void 0,2)}(e))).join(" ");let s;if(n===e.error){const e=t.find(ge);s={stack:e?ue(Z(e)):void 0,fingerprint:pe(e),causes:e?me(e,"console"):void 0,startClocks:Oe(),message:r,source:tt,handling:"handled",handlingStack:o}}return{api:n,message:r,error:s,handlingStack:o}}(t,n,s))}))},()=>{t[n]=r}}))}(n)),Nn[n]))))}const Gn={[e.log]:at.info,[e.debug]:at.debug,[e.info]:at.info,[e.warn]:at.warn,[e.error]:at.error};let Hn;const zn=new WeakMap;function Jn(e){return Hn||(Hn=function(e){return new j((t=>{const{stop:n}=bt(XMLHttpRequest.prototype,"open",Wn),{stop:o}=bt(XMLHttpRequest.prototype,"send",(n=>{!function({target:e,handlingStack:t},n,o){const r=zn.get(e);if(!r)return;const s=r;s.state="start",s.startClocks=Oe(),s.isAborted=!1,s.xhr=e,s.handlingStack=t;let i=!1;const{stop:a}=bt(e,"onreadystatechange",(()=>{e.readyState===XMLHttpRequest.DONE&&c()})),c=()=>{if(u(),a(),i)return;i=!0;const t=r;var n,c;t.state="complete",t.duration=(n=s.startClocks.timeStamp,$e()-n),t.status=e.status,o.notify((c=t,{...c}))},{stop:u}=H(n,e,"loadend",c);o.notify(s)}(n,e,t)}),{computeHandlingStack:!0}),{stop:r}=bt(XMLHttpRequest.prototype,"abort",Vn);return()=>{n(),o(),r()}}))}(e)),Hn}function Wn({target:e,parameters:[t,n]}){zn.set(e,{state:"open",method:String(t).toUpperCase(),url:vt(String(n))})}function Vn({target:e}){const t=zn.get(e);t&&(t.isAborted=!0)}function Xn(e){return e>=500}function Zn(e,t){if(!e.forwardErrorsToLogs)return{stop:_};const n=Jn(e).subscribe((e=>{"complete"===e.state&&r("xhr",e)})),o=xt().subscribe((e=>{"resolve"===e.state&&r("fetch",e)}));function r(n,o){var r;function s(e){const r={isAborted:o.isAborted,handlingStack:o.handlingStack};t.notify(0,{rawLogsEvent:{message:`${Yn(n)} error ${o.method} ${o.url}`,date:o.startClocks.timeStamp,error:{stack:e||"Failed to load",handling:void 0},http:{method:o.method,status_code:o.status,url:o.url},status:at.error,origin:ot},domainContext:r})}r=o.url,Ce.every((e=>r.includes(e)))||!function(e){return 0===e.status&&"opaque"!==e.responseType}(o)&&!Xn(o.status)||("xhr"in o?function(e,t,n){"string"==typeof e.response?n(Kn(e.response,t)):n(e.response)}(o.xhr,e,s):o.response?function(e,t,n){const o=function(e){try{return e.clone()}catch(e){return}}(e);o&&o.body?window.TextDecoder?function(e,t,n){!function(e,t,n){const o=e.getReader(),r=[];let s=0;function i(){let e,i;if(o.cancel().catch(_),n.collectStreamBody){let t;if(1===r.length)t=r[0];else{t=new Uint8Array(s);let e=0;r.forEach((n=>{t.set(n,e),e+=n.length}))}e=t.slice(0,n.bytesLimit),i=t.length>n.bytesLimit}t(void 0,e,i)}!function e(){o.read().then(f((t=>{t.done?i():(n.collectStreamBody&&r.push(t.value),s+=t.value.length,s>n.bytesLimit?i():e())})),f((e=>t(e))))}()}(e,((e,t,o)=>{if(e)n(e);else{let e=(new TextDecoder).decode(t);o&&(e+="..."),n(void 0,e)}}),{bytesLimit:t,collectStreamBody:!0})}(o.body,t.requestErrorResponseLengthLimit,((e,t)=>{n(e?`Unable to retrieve response: ${e}`:t)})):o.text().then(f((e=>n(Kn(e,t)))),f((e=>n(`Unable to retrieve response: ${e}`)))):n()}(o.response,e,s):o.error&&function(e,t,n){n(Kn(ue(Z(e)),t))}(o.error,e,s))}return{stop:()=>{n.unsubscribe(),o.unsubscribe()}}}function Kn(e,t){return e.length>t.requestErrorResponseLengthLimit?`${e.substring(0,t.requestErrorResponseLengthLimit)}...`:e}function Yn(e){return"xhr"===e?"XHR":"Fetch"}function Qn(e){const t=(t,n)=>{const o=fe({stackTrace:t,originalError:n,startClocks:Oe(),nonErrorPrefix:"Uncaught",source:rt,handling:"unhandled"});e.notify(o)},{stop:n}=(o=t,bt(window,"onerror",(({parameters:[e,t,n,r,s]})=>{let i;i=ge(s)?Z(s):ie(e,t,n,r),o(i,null!=s?s:e)})));var o;const{stop:r}=function(e){return bt(window,"onunhandledrejection",(({parameters:[t]})=>{const n=t.reason||"Empty reason",o=Z(n);e(o,n)}))}(t);return{stop:()=>{n(),r()}}}const eo=class{constructor(){this.callbacks={}}notify(e,t){const n=this.callbacks[e];n&&n.forEach((e=>e(t)))}subscribe(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),{unsubscribe:()=>{this.callbacks[e]=this.callbacks[e].filter((e=>t!==e))}}}};function to(e){return{handleLog:function(o,r,s,i,a){const c=D(r.getContext(),o.context);if(it(o.status,dt,r)&&function({status:e,message:o},r){n[no[e]].call(t,o,r)}(o,c),it(o.status,ft,r)){const t={rawLogsEvent:{date:a||$e(),message:o.message,status:o.status,origin:nt},messageContext:c,savedCommonContext:i};s&&(t.domainContext={handlingStack:s}),e.notify(0,t)}}}}const no={[at.ok]:e.debug,[at.debug]:e.debug,[at.info]:e.info,[at.notice]:e.info,[at.warn]:e.warn,[at.error]:e.error,[at.critical]:e.error,[at.alert]:e.error,[at.emerg]:e.error};function oo({encoder:e,request:t,flushController:n,messageBytesLimit:o}){let s={};const c=n.flushObservable.subscribe((n=>function(n){const o=Bt(s).join("\n");s={};const r=(a=n.reason,Bt(En).includes(a)),i=r?t.sendOnExit:t.send;var a;if(r&&e.isAsync){const t=e.finishSync();t.outputBytesCount&&i(ro(t));const n=[t.pendingData,o].filter(Boolean).join("\n");n&&i({data:n,bytesCount:b(n)})}else o&&e.write(e.isEmpty?o:`\n${o}`),e.finish((e=>{i(ro(e))}))}(n)));function u(t,c){const u=E(t),l=e.estimateEncodedBytesCount(u);l>=o?r.warn(`Discarded a message whose size was bigger than the maximum allowed size ${o}KB. ${a} ${i}/#technical-limitations`):(function(e){return void 0!==e&&void 0!==s[e]}(c)&&function(t){const o=s[t];delete s[t];const r=e.estimateEncodedBytesCount(o);n.notifyAfterRemoveMessage(r)}(c),function(t,o,r){n.notifyBeforeAddMessage(o),void 0!==r?(s[r]=t,n.notifyAfterAddMessage()):e.write(e.isEmpty?t:`\n${t}`,(e=>{n.notifyAfterAddMessage(e-o)}))}(u,l,c))}return{flushController:n,add:u,upsert:u,stop:c.unsubscribe}}function ro(e){let t;return t="string"==typeof e.output?e.output:new Blob([e.output],{type:"text/plain"}),{data:t,bytesCount:e.outputBytesCount,encoding:e.encoding}}const so=3145728,io=xe;function ao(e,t,n,o,r){0===t.transportStatus&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?uo(e,t,n,{onSuccess:()=>lo(0,t,n,o,r),onFailure:()=>{t.queuedPayloads.enqueue(e),co(t,n,o,r)}}):t.queuedPayloads.enqueue(e)}function co(e,t,n,o){2===e.transportStatus&&w((()=>{uo(e.queuedPayloads.first(),e,t,{onSuccess:()=>{e.queuedPayloads.dequeue(),e.currentBackoffTime=io,lo(1,e,t,n,o)},onFailure:()=>{e.currentBackoffTime=Math.min(6e4,2*e.currentBackoffTime),co(e,t,n,o)}})}),e.currentBackoffTime)}function uo(e,t,n,{onSuccess:o,onFailure:r}){t.bandwidthMonitor.add(e),n(e,(n=>{t.bandwidthMonitor.remove(e),!function(e){return"opaque"!==e.type&&(0===e.status&&!navigator.onLine||408===e.status||429===e.status||Xn(e.status))}(n)?(t.transportStatus=0,o()):(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?1:2,e.retry={count:e.retry?e.retry.count+1:1,lastFailureStatus:n.status},r())}))}function lo(e,t,n,o,r){0===e&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(r({message:`Reached max ${o} events size queued for upload: 3MiB`,source:et,startClocks:Oe()}),t.queueFullReported=!0);const s=t.queuedPayloads;for(t.queuedPayloads=fo();s.size()>0;)ao(s.dequeue(),t,n,o,r)}function fo(){const e=[];return{bytesCount:0,enqueue(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:()=>e[0],dequeue(){const t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:()=>e.length,isFull(){return this.bytesCount>=so}}}function po(e,t,n){const o={transportStatus:0,currentBackoffTime:io,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:fo(),queueFullReported:!1},r=(n,o)=>function(e,t,n,o){const r=function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}}()&&n.bytesCount<t;if(r){const t=e.build("fetch",n);fetch(t,{method:"POST",body:n.data,keepalive:!0,mode:"cors"}).then(f((e=>null==o?void 0:o({status:e.status,type:e.type}))),f((()=>{mo(e.build("xhr",n),n.data,o)})))}else{mo(e.build("xhr",n),n.data,o)}}(e,t,n,o);return{send:t=>{ao(t,o,r,e.trackType,n)},sendOnExit:n=>{!function(e,t,n){const o=!!navigator.sendBeacon&&n.bytesCount<t;if(o)try{const t=e.build("beacon",n);if(navigator.sendBeacon(t,n.data))return}catch(e){!function(e){go||(go=!0,Xe(e))}(e)}const r=e.build("xhr",n);mo(r,n.data)}(e,t,n)}}}let go=!1;function mo(e,t,n){const o=new XMLHttpRequest;o.open("POST",e,!0),t instanceof Blob&&o.setRequestHeader("Content-Type",t.type),H({allowUntrustedEvents:!0},o,"loadend",(()=>{null==n||n({status:o.status})}),{once:!0}),o.send(t)}function yo({messagesLimit:e,bytesLimit:t,durationLimit:n,pageExitObservable:o,sessionExpireObservable:r}){const s=o.subscribe((e=>d(e.reason))),i=r.subscribe((()=>d("session_expire"))),a=new j((()=>()=>{s.unsubscribe(),i.unsubscribe()}));let c,u=0,l=0;function d(e){if(0===l)return;const t=l,n=u;l=0,u=0,f(),a.notify({reason:e,messagesCount:t,bytesCount:n})}function f(){S(c),c=void 0}return{flushObservable:a,get messagesCount(){return l},notifyBeforeAddMessage(e){u+e>=t&&d("bytes_limit"),l+=1,u+=e,void 0===c&&(c=w((()=>{d("duration_limit")}),n))},notifyAfterAddMessage(n=0){u+=n,l>=e?d("messages_limit"):u>=t&&d("bytes_limit")},notifyAfterRemoveMessage(e){u-=e,l-=1,0===l&&f()}}}function ho(e,t,n,o,r,s,i=oo){const a=u(e,t),c=n&&u(e,n);function u(e,{endpoint:t,encoder:n}){return i({encoder:n,request:po(t,e.batchBytesLimit,o),flushController:yo({messagesLimit:e.batchMessagesLimit,bytesLimit:e.batchBytesLimit,durationLimit:e.flushTimeout,pageExitObservable:r,sessionExpireObservable:s}),messageBytesLimit:e.messageBytesLimit})}return{flushObservable:a.flushController.flushObservable,add(e,t=!0){a.add(e),c&&t&&c.add(n.transformMessage?n.transformMessage(e):e)},upsert:(e,t)=>{a.upsert(e,t),c&&c.upsert(n.transformMessage?n.transformMessage(e):e,t)},stop:()=>{a.stop(),c&&c.stop()}}}function bo(){let e="",t=0;return{isAsync:!1,get isEmpty(){return!e},write(n,o){const r=b(n);t+=r,e+=n,o&&o(r)},finish(e){e(this.finishSync())},finishSync(){const n={output:e,outputBytesCount:t,rawBytesCount:t,pendingData:""};return e="",t=0,n},estimateEncodedBytesCount:e=>e.length}}function vo(e,t,n,o,r){const s=We("browser-logs-sdk",t);s.setContextProvider((()=>{var e,t,n,o,s,i;return{application:{id:null===(e=qn())||void 0===e?void 0:e.application_id},session:{id:null===(t=r.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(o=null===(n=qn())||void 0===n?void 0:n.view)||void 0===o?void 0:o.id},action:{id:null===(i=null===(s=qn())||void 0===s?void 0:s.user_action)||void 0===i?void 0:i.id}}}));const i=[];if(ht()){const e=yt(),t=s.observable.subscribe((t=>e.send("internal_telemetry",t)));i.push((()=>t.unsubscribe()))}else{const e=ho(t,{endpoint:t.rumEndpointBuilder,encoder:bo()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:bo()},n,o,r.expireObservable);i.push((()=>e.stop()));const a=s.observable.subscribe((n=>e.add(n,function(e){return"datad0g.com"===e.site}(t))));i.push((()=>a.unsubscribe()))}return ze.drain(),function(e){Je({type:Ne,configuration:e})}(function(e){const t={session_sample_rate:(n=e).sessionSampleRate,telemetry_sample_rate:n.telemetrySampleRate,telemetry_configuration_sample_rate:n.telemetryConfigurationSampleRate,telemetry_usage_sample_rate:n.telemetryUsageSampleRate,use_before_send:!!n.beforeSend,use_partitioned_cross_site_session_cookie:n.usePartitionedCrossSiteSessionCookie,use_secure_session_cookie:n.useSecureSessionCookie,use_proxy:!!n.proxy,silent_multiple_init:n.silentMultipleInit,track_session_across_subdomains:n.trackSessionAcrossSubdomains,track_anonymous_user:n.trackAnonymousUser,session_persistence:n.sessionPersistence,allow_fallback_to_local_storage:!!n.allowFallbackToLocalStorage,store_contexts_across_pages:!!n.storeContextsAcrossPages,allow_untrusted_events:!!n.allowUntrustedEvents,tracking_consent:n.trackingConsent};var n;return{forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake,...t}}(e)),{telemetry:s,stop:()=>{i.forEach((e=>e()))}}}const wo=function(e){const t=O(),n=F(t.getOrCreateTracker(2)),o=F(t.getOrCreateTracker(1)),s=function(e){const t=new j;return{tryToInit(t){e||(e=t)},update(n){e=n,t.notify()},isGranted:()=>e===G.GRANTED,observable:t}}();function i(){return function(e,t){return{view:{referrer:document.referrer,url:window.location.href},context:e.getContext(),user:t.getContext()}}(n,o)}let a=xn(i,s,((t,r)=>{t.storeContextsAcrossPages&&(V(r,n,_n,2),V(r,o,_n,1));const c=e(t,r,i,s);return a=function(e,t){return{init:e=>{Qe("DD_LOGS",e)},initConfiguration:e,...t}}(t,c),c}));const c={};return function(e){const t={version:"6.2.1",onReady(e){e()},...e};return Object.defineProperty(t,"_setDebug",{get:()=>d,enumerable:!1}),t}({logger:new gt(((...e)=>a.handleLog(...e)),t.createDetachedTracker()),init:f((e=>a.init(e))),setTrackingConsent:f((e=>{s.update(e),Je({type:Fe,usage:{feature:"set-tracking-consent",tracking_consent:e}})})),getGlobalContext:f((()=>n.getContext())),setGlobalContext:f((e=>n.setContext(e))),setGlobalContextProperty:f(((e,t)=>n.setContextProperty(e,t))),removeGlobalContextProperty:f((e=>n.removeContextProperty(e))),clearGlobalContext:f((()=>n.clearContext())),createLogger:f(((e,n={})=>(c[e]=new gt(((...e)=>a.handleLog(...e)),t.createDetachedTracker(),M(e),n.handler,n.level,M(n.context)),c[e]))),getLogger:f((e=>c[e])),getInitConfiguration:f((()=>P(a.initConfiguration))),getInternalContext:f((e=>a.getInternalContext(e))),setUser:f((e=>{(function(e){const t="object"===A(e);return t||r.error("Unsupported user:",e),t})(e)&&o.setContext(Ye(e))})),getUser:f((()=>o.getContext())),setUserProperty:f(((e,t)=>{const n=Ye({[e]:t})[e];o.setContextProperty(e,n)})),removeUserProperty:f((e=>o.removeContextProperty(e))),clearUser:f((()=>o.clearContext()))})}((function(e,t,n,o){const r=new eo,s=[];r.subscribe(1,(e=>De("logs",e)));const i=function(e){return t=>{e.notify(0,{rawLogsEvent:{message:t.message,date:t.startClocks.timeStamp,origin:et,status:at.error}}),Ve("Error reported to customer",{"error.message":t.message})}}(r),a=function(e){return new j((t=>{const{stop:n}=z(e,window,["visibilitychange","freeze"],(e=>{"visibilitychange"===e.type&&"hidden"===document.visibilityState?t.notify({reason:En.HIDDEN}):"freeze"===e.type&&t.notify({reason:En.FROZEN})}),{capture:!0}),o=H(e,window,"beforeunload",(()=>{t.notify({reason:En.UNLOADING})})).stop;return()=>{n(),o()}}))}(t),c=!t.sessionStoreStrategyType||ht()||Tn()?function(e){const t="1"===Bn(e)?{}:void 0;return{findTrackedSession:()=>t,expireObservable:new j}}(t):Mn(t,o),{stop:u}=vo(e,t,i,a,c);s.push((()=>u())),Zn(t,r),function(e,t){if(!e.forwardErrorsToLogs)return{stop:_};const n=new j,{stop:o}=Qn(n),r=n.subscribe((e=>{t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:ut(e),origin:rt,status:at.error}})}))}(t,r),function(e,t){const n=Fn(e.forwardConsoleLogs).subscribe((e=>{const n={rawLogsEvent:{date:$e(),message:e.message,origin:tt,error:e.error&&ut(e.error),status:Gn[e.api]},domainContext:{handlingStack:e.handlingStack}};t.notify(0,n)}))}(t,r),function(e,t){const n=wn(e,e.forwardReports).subscribe((e=>{let n,o=e.message;const r="deprecation"===e.originalError.type?at.warn:at.error;var s,i;r===at.error?n=ut(e):e.stack&&(o+=` Found in ${s=e.stack,null===(i=/@ (.+)/.exec(s))||void 0===i?void 0:i[1]}`),t.notify(0,{rawLogsEvent:{date:$e(),message:o,origin:st,error:n,status:r}})}))}(t,r);const{handleLog:l}=to(r);if(jn(c,t,r,n,i),ht())!function(e){const t=yt();e.subscribe(1,(e=>{t.send("log",e)}))}(r);else{const{stop:e}=function(e,t,n,o,r){const s=ho(e,{endpoint:e.logsEndpointBuilder,encoder:bo()},e.replica&&{endpoint:e.replica.logsEndpointBuilder,encoder:bo()},n,o,r.expireObservable);return t.subscribe(1,(e=>{s.add(e)})),s}(t,r,i,a,c);s.push((()=>e()))}var d;return{handleLog:l,getInternalContext:(d=c,{get:e=>{const t=d.findTrackedSession(e);if(t)return{session_id:t.id}}}).get,stop:()=>{s.forEach((e=>e()))}}}));!function(e,t,n){const o=e[t];o&&!o.q&&o.version&&r.warn("SDK is loaded more than once. This is unsupported and might have unexpected behavior."),e[t]=n,o&&o.q&&o.q.forEach((e=>c(e,"onReady callback threw an error:")()))}(m(),"DD_LOGS",wo)})();