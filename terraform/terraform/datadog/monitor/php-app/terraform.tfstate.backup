{
  "version": 4,
  "terraform_version": "1.6.3",
  "serial": 44,
  "lineage": "0b523ce7-0e08-66cb-604a-260f24c1fb93",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "php_composite_monitor",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "161243602",
            "include_tags": true,
            "locked": false,
            "message": "{{#is_alert}}One or more issues detected in intelichat:\n- Errors: {{datadog_monitor.php_datadog_api_errors.name}}\n- Latency: {{datadog_monitor.php_datadog_api_latency.name}}\n- Process: {{datadog_monitor.php_datadog_api_process_availability.name}}\n\nPlease investigate. {{/is_alert}}\n{{#is_alert_recovery}}All intelichat monitors have recovered.{{/is_alert_recovery}}",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [],
            "name": "PHP Service intelichat-api Composite Monitor",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 0,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": false,
            "on_missing_data": "",
            "priority": "1",
            "query": "161243600 || 161243601 || 161243599",
            "renotify_interval": 0,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [
              "env:prod",
              "service:apache2-php",
              "team:sre",
              "terraform:true"
            ],
            "timeout_h": 0,
            "type": "composite",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "datadog_monitor.php_datadog_api_errors",
            "datadog_monitor.php_datadog_api_latency",
            "datadog_monitor.php_datadog_api_process_availability"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "php_datadog_api_errors",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "161243600",
            "include_tags": true,
            "locked": false,
            "message": "{{#is_alert}}Service intelichat-api has a high error rate (above 20%){{/is_alert}}\n{{#is_alert_recovery}}Service intelichat-api error rate has returned to normal{{/is_alert_recovery}}",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [
              {
                "critical": "20",
                "critical_recovery": "15",
                "ok": "",
                "unknown": "",
                "warning": "",
                "warning_recovery": ""
              }
            ],
            "name": "Service intelichat-api High Error Rate",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 0,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": false,
            "on_missing_data": "",
            "priority": "1",
            "query": "sum(last_1m):trace.web.request.errors{env:prod,service:apache2-php}.as_count() / sum:trace.web.request.hits{env:prod,service:apache2-php}.as_count() * 100 \u003e 20",
            "renotify_interval": 0,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [
              "env:prod",
              "service:apache2-php",
              "team:sre",
              "terraform:true"
            ],
            "timeout_h": 0,
            "type": "query alert",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "php_datadog_api_latency",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "161243601",
            "include_tags": true,
            "locked": false,
            "message": "{{#is_alert}}Service intelichat-api is experiencing high latency{{/is_alert}}\n{{#is_alert_recovery}}Service intelichat-api latency has returned to normal{{/is_alert_recovery}}",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [
              {
                "critical": "2.5",
                "critical_recovery": "2",
                "ok": "",
                "unknown": "",
                "warning": "",
                "warning_recovery": ""
              }
            ],
            "name": "Service intelichat-api High Latency",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 0,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": false,
            "on_missing_data": "",
            "priority": "1",
            "query": "percentile(last_10m):p75:trace.web.request{env:prod,service:apache2-php} \u003e 2.5",
            "renotify_interval": 0,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [
              "env:prod",
              "service:apache2-php",
              "team:sre",
              "terraform:true"
            ],
            "timeout_h": 0,
            "type": "query alert",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "php_datadog_api_process_availability",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "161243599",
            "include_tags": true,
            "locked": false,
            "message": "{{#is_alert}}Service intelichatcontainer is not running{{/is_alert}}\n{{#is_alert_recovery}}Service intelichat process is running normally{{/is_alert_recovery}}",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [
              {
                "critical": "1",
                "critical_recovery": "",
                "ok": "",
                "unknown": "",
                "warning": "",
                "warning_recovery": ""
              }
            ],
            "name": "Service intelichat process Availability",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 0,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": false,
            "on_missing_data": "",
            "priority": "1",
            "query": "avg(last_5m):apache.performance.busy_workers{host:Intelichat} \u003c 1",
            "renotify_interval": 0,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [
              "env:prod",
              "service:apache2-php",
              "team:sre",
              "terraform:true"
            ],
            "timeout_h": 0,
            "type": "query alert",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_service_level_objective",
      "name": "php_datadog_api_slo",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "SLO for intelichat covering errors, latency, and container availability.",
            "force_delete": null,
            "groups": [],
            "id": "84c72e9de0db5349806a027b6d18c700",
            "monitor_ids": [
              161243599,
              161243600,
              161243601
            ],
            "name": "intelichat",
            "query": [],
            "sli_specification": [],
            "tags": [
              "env:prod",
              "service:apache2-php",
              "team:sre",
              "terraform:true"
            ],
            "target_threshold": 90,
            "thresholds": [
              {
                "target": 90,
                "target_display": "90.",
                "timeframe": "30d",
                "warning": 95,
                "warning_display": "95."
              }
            ],
            "timeframe": "30d",
            "type": "monitor",
            "validate": null,
            "warning_threshold": 95
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "datadog_monitor.php_datadog_api_errors",
            "datadog_monitor.php_datadog_api_latency",
            "datadog_monitor.php_datadog_api_process_availability"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
